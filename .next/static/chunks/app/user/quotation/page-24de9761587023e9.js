(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5701],{50935:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var r=t(95155),i=t(12115),n=t(29839),l=t(33196),a=t(22548),o=t(16324),d=t(27943),c=t(54581),m=t(18407),x=t(700),h=t(72390),u=t(72110),p=t(864),b=t(44296),f=t(17976),g=t(56033),_=t(90404),y=t(64263),A=t(99776),j=t(14426),v=t(41218),S=t(65221),z=t(16632),k=t(3127),w=t(68534),W=t(16481),C=t(58674),N=t(23464);let P=(e,s,t,r)=>{var i,n,l,a,o,d,c;switch(s){case"srNo":return void 0!==t?(t+1).toString():"";case"size":return e.product_size||"";case"category":return e.product_category||"";case"packing":return(null==(i=e.product_pieces_per_box)?void 0:i.toString())||"";case"sqFt":return(null==(n=e.product_sq_ft_box)?void 0:n.toString())||"";case"weight":return(null==(l=e.product_weight)?void 0:l.toString())||"";case"series":return e.product_series||"";case"finish":return e.product_finish||"";case"com":return(null==r||null==(a=r[e.id])?void 0:a.com)||"";case"eco":return(null==r||null==(o=r[e.id])?void 0:o.eco)||"";case"premium":return(null==r||null==(d=r[e.id])?void 0:d.premium)||"";case"standard":return(null==r||null==(c=r[e.id])?void 0:c.standard)||"";default:return""}},F=e=>{let{onPreview:s,onShare:t}=e,n=(0,o.A)(),l=(0,d.A)(n.breakpoints.down("sm")),[a,F]=(0,i.useState)(!1),[D,T]=(0,i.useState)(!0),[E,I]=(0,i.useState)(!1),[O,L]=(0,i.useState)([]),[R,q]=(0,i.useState)([]),[B,G]=(0,i.useState)({}),[M,U]=(0,i.useState)({Name:"",mobile:"",refParty:"",seName:"",paymentWithDays:"",tax:"",remark:""});(0,i.useEffect)(()=>{F(!0)},[]),(0,i.useEffect)(()=>{(async()=>{try{var e;T(!0);let s=localStorage.getItem("user"),t=s?JSON.parse(s):null,r=null==t?void 0:t.companyuuid,i=localStorage.getItem("token");if(!r||!i){q([]),T(!1);return}let n=await N.A.get("/api/protected/create-product",{params:{company_uuid:r},headers:{"x-auth-token":"Bearer ".concat(i)}}),l=(Array.isArray(null==(e=n.data)?void 0:e.data)?n.data.data:[]).reduce((e,s)=>{let t=s.product_name||"Other";return e[t]||(e[t]=[]),e[t].push(s),e},{}),a=Object.entries(l).map(e=>{let[s,t]=e;return{name:s,products:t}});q(a)}catch(e){console.error("Failed to fetch products",e),q([])}finally{T(!1)}})()},[]),(0,i.useEffect)(()=>{if(!a)return;let e=localStorage.getItem("quotation_grade_fields"),s=localStorage.getItem("quotation_product_fields"),t={},r={};e&&(t=JSON.parse(e)),s&&(r=JSON.parse(s)),L([{key:"srNo",label:"Sr. No.",visible:!0},...r.product_size?[{key:"size",label:r.product_size,visible:!0}]:[],...r.product_category?[{key:"category",label:r.product_category,visible:!0}]:[],...r.product_series?[{key:"series",label:r.product_series,visible:!0}]:[],...r.product_finish?[{key:"finish",label:r.product_finish,visible:!0}]:[],...r.product_pieces_per_box?[{key:"packing",label:r.product_pieces_per_box,visible:!0}]:[],...r.product_sq_ft_box?[{key:"sqFt",label:r.product_sq_ft_box,visible:!0}]:[],...r.product_weight?[{key:"weight",label:r.product_weight,visible:!0}]:[],...t.com_grade?[{key:"com",label:"Com",visible:!0}]:[],...t.eco_grade?[{key:"eco",label:"Eco",visible:!0}]:[],...t.pre_grade?[{key:"premium",label:"Prem.",visible:!0}]:[],...t.std_grade?[{key:"standard",label:"Std",visible:!0}]:[]])},[a]);let H=(0,i.useCallback)(e=>s=>{U(t=>({...t,[e]:s.target.value}))},[]),J=(0,i.useCallback)((e,s)=>t=>{G(r=>({...r,[e]:{...r[e],[s]:t.target.value}}))},[]),Q=(0,i.useCallback)(async()=>{if(!M.Name.trim()||!M.mobile.trim())return void alert("Please fill in customer name and mobile number");I(!0);try{await new Promise(e=>setTimeout(e,500)),s(M,B,R,O)}catch(e){console.error("Error preparing preview:",e),alert("Failed to prepare preview")}finally{I(!1)}},[M,B,R,O,s]),X=(0,i.useCallback)(()=>{t?t(M,B):alert("Share functionality - This would open share options")},[M,B,t]),Y=(0,i.useCallback)(e=>(0,r.jsx)(c.A,{children:e.products.map((e,s)=>(0,r.jsxs)(m.A,{sx:{p:2,mb:2,boxShadow:2,borderRadius:2},children:[O.find(e=>"size"===e.key&&e.visible)&&(0,r.jsx)(x.A,{variant:"body1",sx:{fontWeight:"bold",mb:1},children:e.product_size}),O.find(e=>"category"===e.key&&e.visible)&&(0,r.jsx)(x.A,{variant:"body1",sx:{fontWeight:"bold",mb:1},children:e.product_category}),(0,r.jsx)(h.A,{sx:{mb:2}}),(0,r.jsx)(u.A,{container:!0,spacing:2,sx:{mb:1},children:O.filter(e=>"size"!==e.key&&"category"!==e.key&&!["premium","standard","com","eco"].includes(e.key)&&e.visible).map(t=>(0,r.jsx)(u.A,{size:{xs:6},children:(0,r.jsxs)(x.A,{variant:"body2",children:[(0,r.jsxs)("strong",{children:[t.label,":"]})," ",P(e,t.key,s,B)]})},t.key))}),(0,r.jsx)(u.A,{container:!0,spacing:2,sx:{mb:1},children:O.filter(e=>["premium","standard","com","eco"].includes(e.key)&&e.visible).map(s=>{var t;return(0,r.jsx)(u.A,{size:{xs:6},children:(0,r.jsx)(p.A,{fullWidth:!0,size:"small",variant:"outlined",label:s.label,value:(null==(t=B[e.id])?void 0:t[s.key])||"",onChange:J(e.id,s.key)})},s.key)})})]},e.id))}),[O,B,J]),K=(0,i.useCallback)(e=>(0,r.jsx)(b.A,{component:m.A,sx:{mb:3,overflowX:"auto"},children:(0,r.jsxs)(f.A,{size:"small",sx:{minWidth:{xs:700,sm:"auto"}},children:[(0,r.jsx)(g.A,{children:(0,r.jsx)(_.A,{sx:{bgcolor:"#f5f5f5"},children:O.filter(e=>e.visible).map(e=>(0,r.jsx)(y.A,{sx:{fontWeight:"bold",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:e.label},e.key))})}),(0,r.jsx)(A.A,{children:e.products.map((e,s)=>(0,r.jsx)(_.A,{hover:!0,children:O.filter(e=>e.visible).map(t=>{switch(t.key){case"srNo":case"size":case"category":case"packing":case"sqFt":case"weight":case"series":case"finish":return(0,r.jsx)(y.A,{sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:P(e,t.key,"srNo"===t.key?s:void 0,B)},t.key);case"com":case"eco":case"premium":case"standard":var i;return(0,r.jsx)(y.A,{children:(0,r.jsx)(p.A,{size:"small",variant:"outlined",placeholder:t.label,value:(null==(i=B[e.id])?void 0:i[t.key])||"",onChange:J(e.id,t.key),sx:{width:{xs:80,sm:85}}})},t.key);default:return null}})},e.id))})]})}),[O,B,J]);return D?(0,r.jsxs)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[(0,r.jsx)(j.A,{size:40}),(0,r.jsx)(x.A,{sx:{ml:2},children:"Loading products..."})]}):(0,r.jsx)(c.A,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5",py:{xs:2,sm:4},px:{xs:1,sm:2}},children:(0,r.jsxs)(v.A,{sx:{maxWidth:1200,mx:"auto",boxShadow:3},children:[(0,r.jsx)(S.A,{title:(0,r.jsx)(x.A,{variant:l?"h5":"h4",component:"h1",sx:{fontWeight:"bold",color:"#1976d2"},children:"Price List"}),action:(0,r.jsx)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,r.jsx)(x.A,{variant:"h6",children:"".concat(new Date().toLocaleDateString("en-GB")," ").concat(new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}))})})}),(0,r.jsxs)(z.A,{sx:{p:{xs:2,sm:3,md:4}},children:[(0,r.jsxs)(u.A,{container:!0,spacing:{xs:2,sm:3},sx:{mb:4},children:[(0,r.jsx)(u.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(c.A,{sx:{display:{xs:"block",sm:"flex"},alignItems:"center",gap:2},children:[(0,r.jsx)(x.A,{sx:{minWidth:{sm:120},fontWeight:500,fontSize:{xs:"0.9rem",sm:"1rem"},mb:{xs:1,sm:0}},children:"Name :"}),(0,r.jsx)(p.A,{fullWidth:!0,required:!0,label:"",placeholder:"Enter customer name",value:M.Name,onChange:H("Name"),variant:"outlined",size:"small"})]})}),(0,r.jsx)(u.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(c.A,{sx:{display:{xs:"block",sm:"flex"},alignItems:"center",gap:2},children:[(0,r.jsx)(x.A,{sx:{minWidth:{sm:120},fontWeight:500,fontSize:{xs:"0.9rem",sm:"1rem"},mb:{xs:1,sm:0}},children:"Mobile :"}),(0,r.jsx)(p.A,{fullWidth:!0,required:!0,label:"",placeholder:"Enter mobile number",value:M.mobile,onChange:H("mobile"),variant:"outlined",size:"small"})]})}),(0,r.jsx)(u.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(c.A,{sx:{display:{xs:"block",sm:"flex"},alignItems:"center",gap:2},children:[(0,r.jsx)(x.A,{sx:{minWidth:{sm:120},fontWeight:500,fontSize:{xs:"0.9rem",sm:"1rem"},mb:{xs:1,sm:0}},children:"Ref Party :"}),(0,r.jsx)(p.A,{fullWidth:!0,label:"",placeholder:"Enter reference party",value:M.refParty,onChange:H("refParty"),variant:"outlined",size:"small"})]})}),(0,r.jsx)(u.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(c.A,{sx:{display:{xs:"block",sm:"flex"},alignItems:"center",gap:2},children:[(0,r.jsx)(x.A,{sx:{minWidth:{sm:120},fontWeight:500,fontSize:{xs:"0.9rem",sm:"1rem"},mb:{xs:1,sm:0}},children:"SE Name :"}),(0,r.jsx)(p.A,{fullWidth:!0,label:"",placeholder:"Enter SE name",value:M.seName,onChange:H("seName"),variant:"outlined",size:"small"})]})})]}),(0,r.jsx)(h.A,{sx:{my:3}}),0===R.length?(0,r.jsxs)(v.A,{sx:{p:3,textAlign:"center"},children:[(0,r.jsx)(x.A,{variant:"h6",color:"text.secondary",children:"No products found"}),(0,r.jsx)(x.A,{variant:"body2",color:"text.secondary",children:"Please add products to your inventory first."})]}):R.map((e,s)=>(0,r.jsxs)(c.A,{sx:{mb:4},children:[(0,r.jsx)(x.A,{variant:l?"h6":"h5",sx:{fontWeight:"bold",mb:2,color:"#333"},children:e.name}),a&&l?Y(e):K(e)]},s)),(0,r.jsxs)(c.A,{sx:{mt:4,mb:3},children:[(0,r.jsx)(x.A,{variant:"h6",sx:{fontWeight:"bold",mb:2,fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Note :-"}),(0,r.jsxs)(c.A,{component:"ol",sx:{pl:{xs:2,sm:3},"& li":{mb:{xs:2,sm:1}}},children:[(0,r.jsx)(c.A,{component:"li",children:(0,r.jsxs)(c.A,{sx:{display:{xs:"block",sm:"flex"},alignItems:"center",gap:1},children:[(0,r.jsx)(x.A,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"},mb:{xs:1,sm:0}},children:"Taxes"}),(0,r.jsx)(p.A,{size:"small",variant:"standard",sx:{width:{xs:"100%",sm:150}},placeholder:"Enter tax details",required:!0,value:M.tax,onChange:H("tax")})]})}),(0,r.jsx)(c.A,{component:"li",children:(0,r.jsxs)(c.A,{sx:{display:{xs:"block",sm:"flex"},alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,r.jsx)(x.A,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"},mr:{sm:1},mb:{xs:1,sm:0}},children:"Payment within"}),(0,r.jsx)(p.A,{size:"small",variant:"standard",sx:{width:{xs:"100%",sm:100},mr:{sm:1}},placeholder:"Days",required:!0,value:M.paymentWithDays,onChange:H("paymentWithDays")}),(0,r.jsx)(x.A,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"from date of billing"})]})}),(0,r.jsx)(c.A,{component:"li",children:(0,r.jsx)(p.A,{size:"small",variant:"standard",fullWidth:!0,placeholder:"Additional notes",sx:{maxWidth:{xs:"100%",sm:400}},value:M.remark,onChange:H("remark")})})]})]}),(0,r.jsx)(c.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"flex-end",gap:{xs:2,sm:2},mt:4},children:a&&(l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(k.A,{onClick:X,disabled:E,sx:{border:"1px solid #1976d2",borderRadius:2,p:2,"&:hover":{bgcolor:"#f5f5f5"}},children:[(0,r.jsx)(W.A,{sx:{mr:1}}),(0,r.jsx)(x.A,{variant:"body2",children:"Share"})]}),(0,r.jsxs)(k.A,{onClick:Q,disabled:E||0===R.length,sx:{bgcolor:"#1976d2",color:"white",borderRadius:2,p:2,"&:hover":{bgcolor:"#1565c0"}},children:[E?(0,r.jsx)(j.A,{size:20,color:"inherit"}):(0,r.jsx)(C.A,{sx:{mr:1}}),(0,r.jsx)(x.A,{variant:"body2",children:E?"Preparing...":"Preview"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{variant:"outlined",startIcon:(0,r.jsx)(W.A,{}),onClick:X,disabled:E,sx:{px:3},children:"Share"}),(0,r.jsx)(w.A,{variant:"contained",startIcon:E?(0,r.jsx)(j.A,{size:20,color:"inherit"}):(0,r.jsx)(C.A,{}),onClick:Q,disabled:E||0===R.length,sx:{px:3},children:E?"Preparing...":"Preview"})]}))})]})]})})};var D=t(71803),T=t(9665),E=t(38464),I=t(40510),O=t(74802),L=t(50096),R=t(26597),q=t(76118);let B=(e,s,t,r)=>{var i,n,l,a,o,d,c;switch(s){case"srNo":return void 0!==t?(t+1).toString():"";case"size":return e.product_size||"";case"category":return e.product_category||"";case"packing":return(null==(i=e.product_pieces_per_box)?void 0:i.toString())||"";case"sqFt":return(null==(n=e.product_sq_ft_box)?void 0:n.toString())||"";case"weight":return(null==(l=e.product_weight)?void 0:l.toString())||"";case"series":return e.product_series||"";case"finish":return e.product_finish||"";case"com":return(null==r||null==(a=r[e.id])?void 0:a.com)||"";case"eco":return(null==r||null==(o=r[e.id])?void 0:o.eco)||"";case"premium":return(null==r||null==(d=r[e.id])?void 0:d.premium)||"";case"standard":return(null==r||null==(c=r[e.id])?void 0:c.standard)||"";default:return""}},G=e=>{let{formData:s,productPricing:t,productGroups:n,columns:l,onBack:a,onWhatsAppSend:p}=e,W=(0,o.A)(),[C,N]=(0,i.useState)(!1),[P,F]=(0,i.useState)("idle"),[G,M]=(0,i.useState)(!1),U=()=>{let e=new R.Ay("p","mm","a4"),r=e.internal.pageSize.width,i=15,a=[180,180,180],o=[0,0,0],d=l.filter(e=>e.visible);e.setFontSize(19),e.setFont("helvetica","bold"),e.setTextColor(52,73,94),e.text("PRICE QUOTATION",20,i),e.setFontSize(11),e.setFont("helvetica","normal"),e.setTextColor(80,80,80);let c=new Date().toLocaleDateString("en-GB"),m=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),x="".concat(c," | ").concat(m),h=e.getTextWidth(x);e.text(x,r-h-20,i),e.setDrawColor(a[0],a[1],a[2]),e.setLineWidth(.3),e.line(20,i+3,r-20,i+3),i+=12,e.setTextColor(o[0],o[1],o[2]),e.setFontSize(11),e.setFont("helvetica","bold"),e.text("CUSTOMER DETAILS",20,i),i+=6,e.setFontSize(11),e.setFont("helvetica","normal"),[{label:"Name:",value:s.Name||"________________"},{label:"Mobile:",value:s.mobile||"________________"},{label:"Ref. Party:",value:s.refParty||"________________"},{label:"SE Name:",value:s.seName||"________________"}].forEach((s,t)=>{let n=t%2==0?20:r/2+10,l=i+6.5*Math.floor(t/2);e.setFont("helvetica","bold"),e.text(s.label,n,l),e.setFont("helvetica","normal"),e.text(s.value,n+e.getTextWidth(s.label)+2,l)}),i+=15;let u=r-40,p=(e,s)=>{if(0===s)return 20;let t={srNo:15,size:25,category:25,packing:20,sqFt:18,weight:18,series:18,finish:18,com:20,eco:20,premium:20,standard:20};return(t[e]||20)/d.reduce((e,s)=>e+(t[s.key]||20),0)*u};n.forEach((s,r)=>{e.setTextColor(o[0],o[1],o[2]),e.setFontSize(11),e.setFont("helvetica","bold"),e.text(s.name,20,i),i+=5;let l=d.map(e=>e.label),c=s.products.map((e,s)=>d.map(r=>B(e,r.key,s,t))),m={};d.forEach((e,s)=>{m[s]={cellWidth:p(e.key,d.length),halign:"size"===e.key||"category"===e.key?"left":"center"}}),(0,q.Ay)(e,{startY:i,head:[l],body:c,styles:{fontSize:9,cellPadding:3,lineColor:a,lineWidth:.2,textColor:o,overflow:"linebreak"},headStyles:{fillColor:[248,248,248],textColor:o,fontStyle:"bold",fontSize:9,halign:"center"},columnStyles:m,margin:{left:20,right:20},tableLineColor:a,tableLineWidth:.2,tableWidth:"auto"}),i=e.lastAutoTable.finalY+(r<n.length-1?8:12)}),i+25>e.internal.pageSize.height-20&&(e.addPage(),i=20),e.setFontSize(11),e.setFont("helvetica","bold"),e.setTextColor(o[0],o[1],o[2]),e.text("TERMS & CONDITIONS",20,i),i+=6,e.setFontSize(11),e.setFont("helvetica","normal"),["1. Taxes: ".concat(s.tax||"As applicable"),"2. Payment: Within ".concat(s.paymentWithDays||"___"," days from billing date"),"3. ".concat(s.remark||"Additional terms as discussed")].forEach(s=>{"1. Taxes: "!==s.trim()&&"2. Payment: Within  days from billing date"!==s.trim()&&"3. "!==s.trim()&&(e.text(s,25,i),i+=5)}),i+=8;let b=localStorage.getItem("user"),f="";if(b)try{let e=JSON.parse(b);(e.name||e.usermobile)&&(f="PDF generated by: ".concat(e.name))}catch(e){console.log(e)}return f&&(i+15>e.internal.pageSize.height-10&&(e.addPage(),i=20),e.setFontSize(9),e.setFont("helvetica","italic"),e.setTextColor(120,120,120),e.text(f,20,e.internal.pageSize.height-10)),e.output("blob")},H=async()=>{if(!s.mobile)return void alert("Customer mobile number is missing");N(!0),F("idle");try{let e=!1;p?e=await p(s,t,n,l):(await new Promise(e=>setTimeout(e,2e3)),console.log("Sending WhatsApp message to:",s.mobile),e=!0),F(e?"success":"error"),setTimeout(()=>F("idle"),3e3)}catch(e){console.error("Error sending WhatsApp:",e),F("error"),setTimeout(()=>F("idle"),3e3)}finally{N(!1)}},J=localStorage.getItem("user"),Q=(J?JSON.parse(J):{}).name,X=(0,d.A)(W.breakpoints.down("sm")),Y=(0,d.A)(W.breakpoints.down("md"));return(0,r.jsx)(c.A,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5",p:{xs:1,sm:2,md:3},width:"100%",maxWidth:"92vw"},children:(0,r.jsxs)(v.A,{sx:{width:"100%",maxWidth:"100vw",mx:"auto",boxShadow:3},children:[(0,r.jsx)(S.A,{title:(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:2},flexWrap:"wrap"},children:[(0,r.jsx)(k.A,{onClick:a,color:"primary",size:X?"small":"medium",children:(0,r.jsx)(E.A,{})}),(0,r.jsx)(x.A,{variant:"h5",component:"h1",sx:{fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.25rem",md:"1.5rem"}},children:"Quotation Preview"}),(0,r.jsx)(c.A,{sx:{ml:"auto",display:"flex",gap:{xs:.5,sm:1}},children:(0,r.jsx)(w.A,{variant:"outlined",startIcon:G?(0,r.jsx)(j.A,{size:16}):(0,r.jsx)(I.A,{}),onClick:()=>{M(!0);try{let e=U(),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="Quotation_".concat(s.Name||"Customer","_").concat(new Date().toLocaleDateString(),".pdf"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch(e){console.error("Error generating PDF:",e),alert("Failed to generate PDF")}finally{M(!1)}},disabled:G,size:X?"small":"medium",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:G?"Generating...":"Download"})})]}),sx:{pb:{xs:1,sm:2}}}),(0,r.jsxs)(z.A,{sx:{p:X?1:Y?2:3},children:[(0,r.jsx)(v.A,{sx:{mb:3,bgcolor:"white",border:"1px solid #ddd",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",minHeight:{xs:"auto",md:"800px"}},children:(0,r.jsxs)(z.A,{sx:{p:X?2:Y?3:4},children:[(0,r.jsx)(c.A,{sx:{mb:{xs:2,sm:3,md:4},borderBottom:"2px solid #34495e",pb:2},children:(0,r.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0},mb:1},children:[(0,r.jsx)(x.A,{variant:"h4",sx:{fontWeight:"bold",color:"#34495e",fontFamily:"serif",fontSize:{xs:"1.25rem",sm:"1.5rem",md:"2rem"}},children:"PRICE QUOTATION"}),(0,r.jsxs)(x.A,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[new Date().toLocaleDateString("en-GB")," |"," ",new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})}),(0,r.jsxs)(c.A,{sx:{mb:{xs:2,sm:3,md:4}},children:[(0,r.jsx)(x.A,{variant:"h6",sx:{fontWeight:"bold",mb:{xs:1,sm:2},color:"#34495e",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"CUSTOMER DETAILS"}),(0,r.jsxs)(u.A,{container:!0,spacing:{xs:1,sm:2,md:3},children:[(0,r.jsx)(u.A,{size:{xs:12,sm:6},children:(0,r.jsxs)(c.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,r.jsx)(x.A,{variant:"body1",sx:{fontWeight:"bold",minWidth:{xs:"60px",sm:"80px"},fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Name:"}),(0,r.jsx)(x.A,{variant:"body1",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.Name||"________________"})]})}),(0,r.jsx)(u.A,{size:{xs:12,sm:6},children:(0,r.jsxs)(c.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,r.jsx)(x.A,{variant:"body1",sx:{fontWeight:"bold",minWidth:{xs:"60px",sm:"80px"},fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Mobile:"}),(0,r.jsx)(x.A,{variant:"body1",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.mobile||"________________"})]})}),(0,r.jsx)(u.A,{size:{xs:12,sm:6},children:(0,r.jsxs)(c.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,r.jsx)(x.A,{variant:"body1",sx:{fontWeight:"bold",minWidth:{xs:"60px",sm:"80px"},fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Ref. Party:"}),(0,r.jsx)(x.A,{variant:"body1",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.refParty||"________________"})]})}),(0,r.jsx)(u.A,{size:{xs:12,sm:6},children:(0,r.jsxs)(c.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,r.jsx)(x.A,{variant:"body1",sx:{fontWeight:"bold",minWidth:{xs:"60px",sm:"80px"},fontSize:{xs:"0.875rem",sm:"1rem"}},children:"SE Name:"}),(0,r.jsx)(x.A,{variant:"body1",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.seName||"________________"})]})})]})]}),n.map((e,s)=>(0,r.jsxs)(c.A,{sx:{mb:{xs:2,sm:3,md:4}},children:[(0,r.jsx)(x.A,{variant:"h6",sx:{fontWeight:"bold",mb:{xs:1,sm:2},color:"#34495e",fontSize:{xs:"1rem",sm:"1.25rem"}},children:e.name}),(0,r.jsx)(b.A,{component:m.A,elevation:0,sx:{border:"1px solid #ddd",overflowX:"auto",width:"100%"},children:(0,r.jsxs)(f.A,{size:"small",sx:{minWidth:120*l.length,width:"100%",tableLayout:"auto"},children:[(0,r.jsx)(g.A,{children:(0,r.jsx)(_.A,{sx:{bgcolor:"#f8f8f8"},children:l.filter(e=>e.visible).map(e=>(0,r.jsx)(y.A,{sx:{fontWeight:"bold",fontSize:"0.9rem",textAlign:"center",border:"1px solid #ddd",py:1,px:1,whiteSpace:"nowrap"},children:e.label},e.key))})}),(0,r.jsx)(A.A,{children:e.products.map((e,s)=>(0,r.jsx)(_.A,{children:l.filter(e=>e.visible).map(i=>(0,r.jsx)(y.A,{sx:{fontSize:"0.9rem",textAlign:"center",border:"1px solid #ddd",py:1,px:1,fontWeight:["com","eco","premium","standard"].includes(i.key)?"bold":"normal",color:["com","eco","premium","standard"].includes(i.key)?"#1976d2":"inherit",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"150px"},children:B(e,i.key,"srNo"===i.key?s:void 0,t)},i.key))},e.id))})]})})]},s)),(0,r.jsxs)(c.A,{sx:{mt:{xs:2,sm:3,md:4}},children:[(0,r.jsx)(x.A,{variant:"h6",sx:{fontWeight:"bold",mb:{xs:1,sm:2},color:"#34495e",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"TERMS & CONDITIONS"}),(0,r.jsxs)(c.A,{sx:{pl:{xs:1,sm:2}},children:[s.tax&&(0,r.jsxs)(x.A,{variant:"body2",sx:{mb:1,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["1. Taxes: ",s.tax]}),s.paymentWithDays&&(0,r.jsxs)(x.A,{variant:"body2",sx:{mb:1,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["2. Payment: Within ",s.paymentWithDays," days from billing date"]}),s.remark&&(0,r.jsxs)(x.A,{variant:"body2",sx:{mb:1,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["3. ",s.remark]})]})]}),(0,r.jsx)(c.A,{sx:{mt:{xs:2,sm:3,md:4},pt:2,borderTop:"1px solid #ddd"},children:(0,r.jsxs)(x.A,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic",fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:["PDF generated by: ",Q]})})]})}),(0,r.jsx)(h.A,{sx:{my:{xs:2,sm:3}}}),(0,r.jsxs)(c.A,{sx:{textAlign:"center",mb:{xs:2,sm:3}},children:[(0,r.jsx)(x.A,{variant:"h6",sx:{mb:{xs:1,sm:2},fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Share Quotation"}),(0,r.jsx)(D.A,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2},justifyContent:"center",alignItems:"center",children:(0,r.jsx)(w.A,{variant:"contained",size:"large",startIcon:C?(0,r.jsx)(j.A,{size:20,color:"inherit"}):"success"===P?(0,r.jsx)(O.A,{}):(0,r.jsx)(L.A,{}),onClick:H,disabled:C||!s.mobile,sx:{bgcolor:"#25D366","&:hover":{bgcolor:"#128C7E"},width:{xs:"100%",sm:"auto"},minWidth:{sm:250},py:{xs:1,sm:1.5},fontSize:{xs:"0.875rem",sm:"1rem"}},children:C?"Generating & Sending PDF...":"success"===P?"PDF Sent Successfully!":"Generate PDF & Send via WhatsApp"})})]}),!s.mobile&&(0,r.jsx)(T.A,{severity:"warning",sx:{mb:2,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Customer mobile number is required to send via WhatsApp"}),"success"===P&&(0,r.jsxs)(T.A,{severity:"success",sx:{mb:2,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["PDF generated and sent successfully to ",s.mobile]}),"error"===P&&(0,r.jsx)(T.A,{severity:"error",sx:{mb:2,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Failed to generate or send PDF. Please try again."})]})]})})},M=(0,n.A)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiCard:{styleOverrides:{root:{borderRadius:12}}},MuiButton:{styleOverrides:{root:{borderRadius:8,textTransform:"none",fontWeight:600}}}}}),U=()=>{let[e,s]=(0,i.useState)("form"),[t,n]=(0,i.useState)(null),[o,d]=(0,i.useState)(null),[c,m]=(0,i.useState)([]),[x,h]=(0,i.useState)([]),u=async()=>{try{return await new Promise(e=>setTimeout(e,2e3)),!0}catch(e){return console.error("Error sending WhatsApp message:",e),!1}};return(0,r.jsxs)(l.A,{theme:M,children:[(0,r.jsx)(a.Ay,{}),(0,r.jsxs)("div",{style:{minHeight:"100vh"},children:["form"===e&&(0,r.jsx)(F,{onPreview:(e,t,r,i)=>{n(e),d(t),m(r),h(i),s("preview")},onShare:e=>{alert("Share functionality called for customer: ".concat(e.Name))}}),"preview"===e&&t&&o&&c.length>0&&x.length>0&&(0,r.jsx)(G,{formData:t,productPricing:o,productGroups:c,columns:x,onBack:()=>{s("form"),n(null),d(null),m([]),h([])},onWhatsAppSend:u})]})]})}},74188:(e,s,t)=>{Promise.resolve().then(t.bind(t,50935))}},e=>{var s=s=>e(e.s=s);e.O(0,[3930,7515,8789,3464,3535,7931,5279,4237,8441,1684,7358],()=>s(74188)),_N_E=e.O()}]);