(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9939],{40963:(e,s,t)=>{"use strict";t.d(s,{n:()=>d,d:()=>c});var r=t(95155),a=t(12115),l=t(35726),i=t(9665);let o=e=>{let{open:s,message:t,severity:a="info",duration:o=2e3,onClose:n}=e;return(0,r.jsx)(l.A,{open:s,autoHideDuration:o,onClose:n,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsx)(i.A,{onClose:n,severity:a,variant:"filled",children:t})})},n=(0,a.createContext)(void 0),d=e=>{let{children:s}=e,[t,l]=(0,a.useState)({open:!1,message:"",severity:"info",duration:2e3,onClose:void 0});return(0,r.jsxs)(n.Provider,{value:{showSnackbar:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;l({open:!0,message:e,severity:s,duration:t,onClose:r})}},children:[s,(0,r.jsx)(o,{open:t.open,message:t.message,severity:t.severity,duration:t.duration,onClose:()=>{l(e=>({...e,open:!1})),t.onClose&&t.onClose()}})]})},c=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useSnackbar must be used within a SnackbarProvider");return e}},65641:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(95155),a=t(12115),l=t(76408),i=t(6874),o=t.n(i),n=t(28890),d=t(40857),c=t(19505),x=t(68534),m=t(41101),u=t(83729),h=t(3127),p=t(71803),g=t(24507),b=t(56278),f=t(60744),j=t(54492),y=t(99927),N=t(76871),w=t(71977),v=t(23464),A=t(40963);let C=async e=>{try{let s=localStorage.getItem("user");if(!s)return;let t=JSON.parse(s),r=t.companyuuid||t.company_uuid;if(!r)return;let a=localStorage.getItem("token"),l=await v.A.get("/api/protected/get-all-company-users?company_uuid=".concat(r),a?{headers:{"x-auth-token":"Bearer ".concat(a)}}:void 0);if(l.data&&Array.isArray(l.data.data)){let s=l.data.data.map(e=>({id:e.customer_uuid,name:e.customer_name,email:e.customer_email,mobileNumber:e.customer_mobile,status:e.status||"ACTIVE",customerRole:e.customer_role||1}));e(s)}}catch(e){console.error("Failed to fetch users",e)}},k=e=>{switch(e){case"ACTIVE":return{sx:{backgroundColor:"#d1fae5",color:"#065f46",borderColor:"#6ee7b7"},iconColor:"#22c55e"};case"INACTIVE":return{sx:{backgroundColor:"#fee2e2",color:"#991b1b",borderColor:"#fca5a5"},iconColor:"#ef4444"};default:return{sx:{backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"},iconColor:"#6b7280"}}};function S(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[S,_]=(0,a.useState)(!1),[E,R]=(0,a.useState)(null),{showSnackbar:z}=(0,A.d)(),I=e=>{R(e),_(!0)},D=async()=>{if(E)try{let e=localStorage.getItem("token"),t=await v.A.delete("/api/protected/create-customer?customer_uuid=".concat(E.id),e?{headers:{"x-auth-token":"Bearer ".concat(e)}}:void 0);s(e=>e.filter(e=>e.id!==E.id)),z(t.data.msg,"success")}catch(s){var e,t;z((null==s||null==(t=s.response)||null==(e=t.data)?void 0:e.msg)||"Failed to delete user","error")}finally{_(!1),R(null)}},F=()=>{_(!1),R(null)},[T,M]=(0,a.useState)(1),P=Math.ceil(e.length/10),B=e.slice((T-1)*10,10*T);return(0,a.useEffect)(()=>{i(!0),C(s).finally(()=>i(!1))},[]),(0,r.jsx)(l.P.div,{className:"min-h-screen max-w-screen bg-gray-50",children:(0,r.jsxs)("main",{className:"px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-24 w-full max-w-8xl mx-auto py-4 sm:py-6 lg:py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col  sm:flex-row sm:justify-between sm:items-center gap-4 mb-6 lg:mb-8",children:[(0,r.jsx)("h1",{className:" text-2xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"User List"}),(0,r.jsxs)(o(),{href:"/user/users/add",className:"inline-flex items-center justify-center gap-2 bg-indigo-600  text-white px-4 py-2 sm:px-4 sm:py-2 rounded-lg hover:bg-indigo-700 transition-colors text-sm sm:text-base font-medium shadow-sm",children:[(0,r.jsx)(d.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Add User"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Add"})]})]}),(0,r.jsx)("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"S.No"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Mobile Number"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map((e,s)=>(0,r.jsxs)("tr",{className:s%2==0?"bg-white hover:bg-blue-50 transition":"bg-gray-50 hover:bg-blue-50 transition",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:s+1}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-base font-semibold text-gray-900",children:e.name})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.mobileNumber}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:(0,r.jsx)(m.A,{label:1===e.customerRole?"ADMIN":2===e.customerRole?"STAFF":e.customerRole,size:"small",color:1===e.customerRole?"primary":2===e.customerRole?"secondary":"default",variant:"outlined",className:"ml-2",sx:{color:"white",backgroundColor:"#4f46e5"}})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:(0,r.jsx)(m.A,{label:e.status,size:"small",variant:"outlined",className:"ml-2",sx:k(e.status).sx})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(u.A,{title:"Edit",arrow:!0,children:(0,r.jsx)(o(),{href:"/user/users/".concat(e.id,"/edit"),className:"text-green-600 hover:text-green-900",children:(0,r.jsx)(h.A,{size:"small",color:"success",children:(0,r.jsx)(n.A,{fontSize:"small"})})})}),(0,r.jsx)(u.A,{title:"Delete",arrow:!0,children:(0,r.jsx)("span",{children:(0,r.jsx)(h.A,{size:"small",color:"error",onClick:()=>I(e),children:(0,r.jsx)(c.A,{fontSize:"small"})})})})]})})]},e.id))})]})})}),(0,r.jsx)("div",{className:"lg:hidden space-y-4",children:B.map(e=>(0,r.jsx)(l.P.div,{className:"bg-white rounded-xl shadow-md border border-gray-200 p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Email:"})," ",e.email]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Mobile Number:"})," ",e.mobileNumber]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Role:"}),(0,r.jsx)(m.A,{label:1===e.customerRole?"ADMIN":2===e.customerRole?"STAFF":e.customerRole,size:"small",variant:"outlined",className:"ml-2",sx:{color:"red"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Status:"}),(0,r.jsx)(m.A,{label:e.status,size:"small",variant:"outlined",className:"ml-2",sx:k(e.status).sx,icon:(0,r.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",display:"inline-block",background:k(e.status).iconColor}})})]})]})})]}),(0,r.jsxs)("div",{className:"flex gap-2 sm:flex-col sm:gap-2",children:[(0,r.jsxs)(o(),{href:"/user/users/".concat(e.id,"/edit"),className:"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 transition-colors",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>I(e),className:"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 transition-colors",children:[(0,r.jsx)(c.A,{className:"w-4 h-4"}),"Delete"]})]})]})},e.id))}),t?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"Loading..."})}):0===e.length?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"No data found"})}):null,(0,r.jsx)(p.A,{direction:"row",justifyContent:"center",mt:4,sx:{"& .MuiPagination-ul":{gap:1}},children:(0,r.jsx)(g.A,{count:P,page:T,onChange:(e,s)=>M(s),color:"primary",shape:"rounded",showFirstButton:!0,showLastButton:!0})}),(0,r.jsxs)(b.A,{open:S,onClose:F,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",TransitionComponent:f.A,children:[(0,r.jsx)(j.A,{id:"delete-dialog-title",children:"Confirm Delete"}),(0,r.jsx)(y.A,{children:(0,r.jsxs)(N.A,{id:"delete-dialog-description",children:["Are you sure you want to delete ",(0,r.jsx)("b",{children:null==E?void 0:E.name}),"? This action cannot be undone."]})}),(0,r.jsxs)(w.A,{children:[(0,r.jsx)(x.A,{onClick:F,color:"primary",variant:"outlined",children:"Cancel"}),(0,r.jsx)(x.A,{onClick:D,color:"error",variant:"contained",children:"Delete"})]})]})]})})}},68234:(e,s,t)=>{Promise.resolve().then(t.bind(t,65641))}},e=>{var s=s=>e(e.s=s);e.O(0,[6408,7515,8789,3464,5726,3535,9049,6874,1101,5279,3729,6998,9424,8441,1684,7358],()=>s(68234)),_N_E=e.O()}]);