(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{7700:(e,t,s)=>{Promise.resolve().then(s.bind(s,80843))},40963:(e,t,s)=>{"use strict";s.d(t,{n:()=>o,d:()=>c});var r=s(95155),l=s(12115),a=s(35726),i=s(9665);let n=e=>{let{open:t,message:s,severity:l="info",duration:n=2e3,onClose:d}=e;return(0,r.jsx)(a.A,{open:t,autoHideDuration:n,onClose:d,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsx)(i.A,{onClose:d,severity:l,variant:"filled",children:s})})},d=(0,l.createContext)(void 0),o=e=>{let{children:t}=e,[s,a]=(0,l.useState)({open:!1,message:"",severity:"info",duration:2e3,onClose:void 0});return(0,r.jsxs)(d.Provider,{value:{showSnackbar:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;a({open:!0,message:e,severity:t,duration:s,onClose:r})}},children:[t,(0,r.jsx)(n,{open:s.open,message:s.message,severity:s.severity,duration:s.duration,onClose:()=>{a(e=>({...e,open:!1})),s.onClose&&s.onClose()}})]})},c=()=>{let e=(0,l.useContext)(d);if(!e)throw Error("useSnackbar must be used within a SnackbarProvider");return e}},80843:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var r=s(95155),l=s(12115),a=s(76408),i=s(6874),n=s.n(i),d=s(28890),o=s(40857),c=s(19505),x=s(68534),m=s(83729),u=s(3127),h=s(71803),g=s(24507),p=s(56278),f=s(60744),j=s(54492),y=s(99927),b=s(76871),v=s(71977),w=s(23464),N=s(40963);function A(){let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[A,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)(null),[_,P]=(0,l.useState)([]),{showSnackbar:E}=(0,N.d)();(0,l.useEffect)(()=>{let e=localStorage.getItem("quotation_product_fields");if(e)try{let t=JSON.parse(e),s=Object.entries(t).map(e=>{let[t,s]=e;return{key:t,label:s}});P(s)}catch(e){console.error("Failed to parse dynamic fields from localStorage:",e),P([])}},[]),(0,l.useEffect)(()=>{(async()=>{try{var e;let s=localStorage.getItem("user"),r=s?JSON.parse(s):null,l=null==r?void 0:r.companyuuid,a=localStorage.getItem("token");if(console.log(l,a),!l||!a){t([]),i(!1);return}let n=await w.A.get("/api/protected/create-product",{params:{company_uuid:l},headers:{"x-auth-token":"Bearer ".concat(a)}});(null==(e=n.data)?void 0:e.status)&&Array.isArray(n.data.data)?t(n.data.data):t([])}catch(e){console.error("Failed to fetch products:",e),t([])}finally{i(!1)}})()},[]);let O=e=>{S(e),k(!0)},z=async()=>{if(!C)return;let e=localStorage.getItem("token");if(!e){E("Authentication token missing.","error"),k(!1),S(null);return}try{let s=await w.A.delete("/api/protected/create-product?product_uuid=".concat(C.product_uuid),{headers:{"x-auth-token":"Bearer ".concat(e)}});t(e=>e.filter(e=>e.id!==C.id)),E(s.data.msg,"success")}catch(e){var s,r;E((null==e||null==(r=e.res)||null==(s=r.data)?void 0:s.msg)||"Failed to delete product.","error")}finally{k(!1),S(null)}},D=()=>{k(!1),S(null)},[B,F]=(0,l.useState)(1),I=Math.ceil(e.length/10),L=e.slice((B-1)*10,10*B);return s?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):(0,r.jsx)(a.P.div,{className:"min-h-screen max-w-screen bg-gray-50",children:(0,r.jsxs)("main",{className:"px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-24 w-full max-w-8xl mx-auto py-4 sm:py-6 lg:py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col  sm:flex-row sm:justify-between sm:items-center gap-4 mb-6 lg:mb-8",children:[(0,r.jsx)("h1",{className:" text-2xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Product List"}),(0,r.jsxs)(n(),{href:"/user/products/add",className:"inline-flex items-center justify-center gap-2 bg-indigo-600  text-white px-4 py-2 sm:px-4 sm:py-2 rounded-lg hover:bg-indigo-700 transition-colors text-sm sm:text-base font-medium shadow-sm",children:[(0,r.jsx)(o.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Add Product"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Add Product"})]})]}),(0,r.jsx)("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,r.jsxs)("tr",{children:[_.map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:e.label},e.key)),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map((e,t)=>(0,r.jsxs)("tr",{className:t%2==0?"bg-white hover:bg-blue-50 transition":"bg-gray-50 hover:bg-blue-50 transition",children:[_.map(t=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e[t.key]},t.key)),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.A,{title:"Edit",arrow:!0,children:(0,r.jsx)(n(),{href:"/user/products/".concat(e.product_uuid,"/edit"),className:"text-green-600 hover:text-green-900",children:(0,r.jsx)(u.A,{size:"small",color:"success",children:(0,r.jsx)(d.A,{fontSize:"small"})})})}),(0,r.jsx)(m.A,{title:"Delete",arrow:!0,children:(0,r.jsx)("span",{children:(0,r.jsx)(u.A,{size:"small",color:"error",onClick:()=>O(e),children:(0,r.jsx)(c.A,{fontSize:"small"})})})})]})})]},e.id))})]})})}),(0,r.jsx)("div",{className:"lg:hidden space-y-4",children:L.map(e=>{var t;return(0,r.jsx)(a.P.div,{className:"bg-white rounded-xl shadow-md border border-gray-200 p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e[null==(t=_[0])?void 0:t.key]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:_.map(t=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"font-medium",children:[t.label,":"]})," ",e[t.key]]},t.key))})})]}),(0,r.jsxs)("div",{className:"flex gap-2 sm:flex-col sm:gap-2",children:[(0,r.jsxs)(n(),{href:"/user/products/".concat(e.product_uuid,"/edit"),className:"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 transition-colors",children:[(0,r.jsx)(d.A,{className:"w-4 h-4"}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>O(e),className:"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 transition-colors",children:[(0,r.jsx)(c.A,{className:"w-4 h-4"}),"Delete"]})]})]})},e.id)})}),s?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"Loading..."})}):0===e.length?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"No data found"})}):null,(0,r.jsx)(h.A,{direction:"row",justifyContent:"center",mt:4,sx:{"& .MuiPagination-ul":{gap:1}},children:(0,r.jsx)(g.A,{count:I,page:B,onChange:(e,t)=>F(t),color:"primary",shape:"rounded",showFirstButton:!0,showLastButton:!0})}),(0,r.jsxs)(p.A,{open:A,onClose:D,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",TransitionComponent:f.A,children:[(0,r.jsx)(j.A,{id:"delete-dialog-title",children:"Confirm Delete"}),(0,r.jsx)(y.A,{children:(0,r.jsxs)(b.A,{id:"delete-dialog-description",children:["Are you sure you want to delete ",(0,r.jsx)("b",{children:null==C?void 0:C.product_name}),"? This action cannot be undone."]})}),(0,r.jsxs)(v.A,{children:[(0,r.jsx)(x.A,{onClick:D,color:"primary",variant:"outlined",children:"Cancel"}),(0,r.jsx)(x.A,{onClick:z,color:"error",variant:"contained",children:"Delete"})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6408,7515,8789,3464,5726,3535,9049,6874,5279,3729,6998,9424,8441,1684,7358],()=>t(7700)),_N_E=e.O()}]);