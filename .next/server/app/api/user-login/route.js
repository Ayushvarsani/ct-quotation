(()=>{var e={};e.id=1043,e.ids=[1043],e.modules={1350:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{L:()=>u,u:()=>n});var a=s(96364),o=e([a]);a=(o.then?(await o)():o)[0];let u=async e=>{let t=await a.d.query("select * from customers cs left join quotation_labels qp on cs.company_uuid=qp.company_uuid where cs.customer_email=$1",[e]);return 0===t.rowCount?{msg:"customer not found",code:200,status:!1}:{msg:"customer found",code:200,status:!0,data:t.rows[0]}},n=async(e,t)=>{let s=await a.d.query("update customers set jwt_token=$1  where customer_email=$2 returning customer_uuid",[t,e]);return 0===s.rowCount?{msg:"customer not found",code:200,status:!1}:{msg:"customer token updated",code:200,status:!0,data:s.rows[0]}};r()}catch(e){r(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8995:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{POST:()=>c});var a=s(32190),o=s(1350),u=s(62484),n=s(88634),i=e([o]);async function c(e){try{let{email:t,password:s}=await e.json(),r=await (0,o.L)(t);if(console.log(r),!1===r.status)return a.NextResponse.json({status:!1,msg:"Admin Not Found"},{status:401});if(!await (0,u.b)(s,r.data.customer_password))return a.NextResponse.json({status:!1,message:"Invalid Password"},{status:401});let i=await (0,n.H)(r.data.customer_uuid);return r.data.jwt_token=i,await (0,o.u)(t,i),a.NextResponse.json({status:!0,msg:r.msg,data:r.data},{status:r.code})}catch(e){return console.log(e),a.NextResponse.json({status:!1,message:`Internal server error ${e}`},{status:500})}}o=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51723:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{patchFetch:()=>c,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var a=s(96559),o=s(48088),u=s(37719),n=s(8995),i=e([n]);n=(i.then?(await i)():i)[0];let p=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/user-login/route",pathname:"/api/user-login",filename:"route",bundlePath:"app/api/user-login/route"},resolvedPagePath:"D:\\ct-quotation\\src\\app\\api\\user-login\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:m}=p;function c(){return(0,u.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}r()}catch(e){r(e)}})},55511:e=>{"use strict";e.exports=require("crypto")},62484:(e,t,s)=>{"use strict";s.d(t,{E:()=>a,b:()=>o});var r=s(85663);let a=async e=>{let t=await r.Ay.genSalt(10);return r.Ay.hash(e,t)},o=(e,t)=>r.Ay.compare(e,t)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},88634:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var r=s(43205),a=s.n(r);let o=e=>(console.log(e),a().sign({userUuid:e},process.env.JWT_TOKEN_KEY))},96364:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{d:()=>u});var a=s(64939),o=e([a]);let u=new(a=(o.then?(await o)():o)[0]).Pool({user:process.env.DB_USER,host:process.env.DB_HOST,database:process.env.DB_NAME,password:process.env.DB_PASSWORD,port:5432,ssl:{rejectUnauthorized:!1}});r()}catch(e){r(e)}})},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,580,5663,3205],()=>s(51723));module.exports=r})();