(()=>{var e={};e.id=4719,e.ids=[4719],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14265:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{POST:()=>d});var a=s(32190),n=s(65188),o=s(62484),i=s(88634),u=e([n]);async function d(e){try{let{email:t,password:s}=await e.json(),r=await (0,n.b)(t);if(!1===r.status)return a.NextResponse.json({status:!1,msg:"Admin Not Found"},{status:401});if(!await (0,o.b)(s,r.data.admin_password))return a.NextResponse.json({status:!1,message:"Invalid Password"},{status:401});let u=(0,i.H)(r.data.admin_uuid);return r.data.jwt_token=u,await (0,n.i)(t,u),a.NextResponse.json({status:!0,msg:r.msg,data:r.data},{status:r.code})}catch(e){return a.NextResponse.json({status:!1,message:`Internal server error ${e}`},{status:500})}}n=(u.then?(await u)():u)[0],r()}catch(e){r(e)}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},62484:(e,t,s)=>{"use strict";s.d(t,{E:()=>a,b:()=>n});var r=s(85663);let a=async e=>{let t=await r.Ay.genSalt(10);return r.Ay.hash(e,t)},n=(e,t)=>r.Ay.compare(e,t)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},65188:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{b:()=>o,i:()=>i});var a=s(96364),n=e([a]);a=(n.then?(await n)():n)[0];let o=async e=>{let t=await a.d.query("select * from admin where admin_email=$1",[e]);return 0===t.rowCount?{msg:"Admin not found",code:200,status:!1}:{msg:"Admin found",code:200,status:!0,data:t.rows[0]}},i=async(e,t)=>{let s=await a.d.query("update admin set jwt_token=$1 where admin_email=$2 returning admin_uuid",[t,e]);return 0===s.rowCount?{msg:"Admin not found",code:200,status:!1}:{msg:"Admin token updated",code:200,status:!0,data:s.rows[0]}};r()}catch(e){r(e)}})},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},87019:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{patchFetch:()=>d,routeModule:()=>c,serverHooks:()=>l,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>m});var a=s(96559),n=s(48088),o=s(37719),i=s(14265),u=e([i]);i=(u.then?(await u)():u)[0];let c=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin-login/route",pathname:"/api/admin-login",filename:"route",bundlePath:"app/api/admin-login/route"},resolvedPagePath:"D:\\ct-quotation\\src\\app\\api\\admin-login\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:p,workUnitAsyncStorage:m,serverHooks:l}=c;function d(){return(0,o.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:m})}r()}catch(e){r(e)}})},88634:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});var r=s(43205),a=s.n(r);let n=e=>(console.log(e),a().sign({userUuid:e},process.env.JWT_TOKEN_KEY))},96364:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{d:()=>o});var a=s(64939),n=e([a]);let o=new(a=(n.then?(await n)():n)[0]).Pool({user:process.env.DB_USER,host:process.env.DB_HOST,database:process.env.DB_NAME,password:process.env.DB_PASSWORD,port:5432,ssl:{rejectUnauthorized:!1}});r()}catch(e){r(e)}})},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,580,5663,3205],()=>s(87019));module.exports=r})();